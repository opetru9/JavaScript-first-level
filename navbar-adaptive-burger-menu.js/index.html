<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name=”viewport” content=”width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;” />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body onresize="adapt()" onload="adapt()">
    <div id="navbarWRapper">
        <div id="navbar"></div>  
        <div id="navbarDrop"></div>
    </div> 
    

     <script>
        const TOTAL     = 9
        const BTN_WIDTH = 70
        let eWidth      = 0
        let dropOpen    = false
        const items     = [
            "BRAND",
            "Rerum",
            "Inventore",
            "Delectus",
            "Blanditiis",
            "Dolorem",
            "Ipsum",
            "Exercitationem",
            "Minima",
        ]
        const priority = [1,0,0,1,0,1,1,0,1]
        function adapt(){
            for (let n = 9; n > 1; n--){
                estimateWidth(n)
                if (eWidth <= innerWidth){
                    showItems(n)
                    break;
                }
            }
        }
        function estimateWidth(n){
            let text = ``
            let pad  = 0
            for (let i = 0; i < n; i++){
                text += items[i] 
                pad  += 2 * 5
            };
            eWidth = 10 * text.length + pad + BTN_WIDTH
        }

        function showItems(n){
            navbar.innerHTML = ``
            for (let i = 0; i < n && i < items.length; i++){
                navbar.innerHTML += `<a href="">${items[i]} </a>`
                navbarDrop.innerHTML = ``
            };
            let remaining = TOTAL - n
            if(remaining > 0){
                navbar.innerHTML += `<button onclick = " showRemainingItems(${remaining})"> <span id = "number_items">${remaining} </span> <i class="fa-solid fa-bars"></i> </button>`
            }
        };
        function showRemainingItems(n){
            if (dropOpen){
                navbarDrop.innerHTML = ``
                dropOpen = false
            }else {
                for(let i = TOTAL - n; i < TOTAL ;i++){
                    navbarDrop.innerHTML += `<a class="drop_items" href="">${items[i]} </a> <br>`
                }
                dropOpen = true
            }
        }
        estimateWidth();
        showItems(9);
     </script>
</body>
</html>